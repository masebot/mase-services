<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO Meta Tags -->
    <title>MASE | AI Consulting & Digital Transformation | Future-Proof Your Enterprise</title>
    <meta name="description" content="Enterprise AI consulting for digital transformation. We help companies build AI infrastructure that makes them competitive and resilient in the age of automation. Strategy sessions available.">
    <meta name="keywords" content="AI consulting, AI agency, digital transformation, enterprise AI strategy, business automation, AI implementation, AI infrastructure, AI agents, autonomous agents, machine learning consulting, AI integration, future of work, AI strategy session">
    <meta name="robots" content="index, follow">
    <meta name="author" content="MASE Services LLC">
    
    <!-- Open Graph -->
    <meta property="og:title" content="MASE | Enterprise AI Consulting & Digital Transformation">
    <meta property="og:description" content="Build the AI foundation that makes your company competitive for the next decade. Strategy to deployment.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://mase-services.com">
    <meta property="og:site_name" content="MASE Services">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="MASE | AI Consulting & Digital Transformation">
    <meta name="twitter:description" content="Future-proof your enterprise with AI infrastructure that scales.">
    
    <!-- Canonical -->
    <link rel="canonical" href="https://mase-services.com">
    
    <!-- Schema Markup -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "ProfessionalService",
        "name": "MASE Services LLC",
        "description": "Enterprise AI consulting and digital transformation. We help companies build AI infrastructure for long-term competitive advantage.",
        "url": "https://mase-services.com",
        "email": "mase@mase-services.com",
        "serviceType": ["AI Consulting", "Digital Transformation", "AI Strategy", "AI Agent Development", "Enterprise Automation"],
        "areaServed": "United States",
        "priceRange": "$$$",
        "founder": {
            "@type": "Person",
            "name": "Mason Chambers"
        },
        "address": {
            "@type": "PostalAddress",
            "addressRegion": "CA",
            "addressCountry": "US"
        }
    }
    </script>

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;700&family=Space+Grotesk:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        :root { --neon-blue: #00f3ff; --neon-purple: #bc13fe; --alert-red: #ff2a2a; --bg-color: #030305; }
        body { background-color: var(--bg-color); color: white; font-family: 'Inter', sans-serif; overflow-x: hidden; margin: 0; }
        h1, h2, h3 { font-family: 'Space Grotesk', sans-serif; }
        #webgl-container { position: fixed; inset: 0; z-index: 0; }
        .hud-layer { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 10; pointer-events: none; padding: 2rem; display: flex; flex-direction: column; justify-content: space-between; }
        .hud-border { position: absolute; border: 1px solid rgba(255,255,255,0.1); width: 20px; height: 20px; }
        .tl { top: 2rem; left: 2rem; border-right: 0; border-bottom: 0; }
        .tr { top: 2rem; right: 2rem; border-left: 0; border-bottom: 0; }
        .bl { bottom: 2rem; left: 2rem; border-right: 0; border-top: 0; }
        .br { bottom: 2rem; right: 2rem; border-left: 0; border-top: 0; }
        .scroll-section { position: relative; z-index: 20; min-height: 100vh; display: flex; align-items: center; justify-content: flex-start; padding: 2rem; pointer-events: none; }
        .content-container-left { margin-left: 5%; width: 100%; max-width: 520px; }
        .content-container-right { margin-left: auto; margin-right: 5%; width: 100%; max-width: 520px; }
        .content-card { background: rgba(0,0,0,0.7); backdrop-filter: blur(12px); border: 1px solid rgba(255,255,255,0.1); padding: 3rem; width: 100%; border-radius: 4px; pointer-events: auto; transform: translateY(20px); opacity: 0; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .marker-text { color: var(--neon-blue); font-size: 0.7rem; letter-spacing: 0.2em; text-transform: uppercase; margin-bottom: 1rem; display: block; font-weight: 500; }
        .glow-text { text-shadow: 0 0 30px rgba(0,243,255,0.4); }
        .progress-container { position: fixed; right: 2rem; top: 50%; transform: translateY(-50%); height: 200px; width: 2px; background: rgba(255,255,255,0.1); z-index: 50; }
        .progress-bar { width: 100%; background: var(--neon-blue); height: 0%; box-shadow: 0 0 10px var(--neon-blue); }
        .status-pill { display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.5rem 1rem; border: 1px solid rgba(255,255,255,0.1); border-radius: 99px; font-family: monospace; font-size: 0.8rem; background: rgba(0,0,0,0.5); }
        .status-dot { width: 6px; height: 6px; border-radius: 50%; background-color: #555; transition: all 0.3s; }
        .status-dot.active { background-color: var(--neon-blue); box-shadow: 0 0 8px var(--neon-blue); }
        .status-dot.alert { background-color: var(--alert-red); box-shadow: 0 0 8px var(--alert-red); }
        input, textarea, select { width: 100%; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); padding: 1rem; color: white; margin-bottom: 1rem; border-radius: 4px; transition: all 0.3s; }
        input:focus, textarea:focus, select:focus { outline: none; border-color: var(--neon-blue); background: rgba(255,255,255,0.1); }
        .cta-button { background-color: white; color: black; font-weight: bold; padding: 1rem 2rem; border-radius: 4px; text-transform: uppercase; letter-spacing: 0.1em; font-size: 0.875rem; transition: all 0.3s ease; cursor: pointer; pointer-events: auto; border: 1px solid white; }
        .cta-button:hover { background-color: var(--neon-blue); border-color: var(--neon-blue); box-shadow: 0 0 15px var(--neon-blue); }
        .cta-button:disabled { opacity: 0.5; cursor: not-allowed; }
        .service-tag { display: inline-block; padding: 0.35rem 0.75rem; border: 1px solid rgba(255,255,255,0.2); border-radius: 99px; font-size: 0.7rem; margin: 0.25rem; color: #ccc; }
        .faq-item { border-bottom: 1px solid rgba(255,255,255,0.1); padding: 1rem 0; }
        .faq-q { font-weight: 600; margin-bottom: 0.5rem; color: white; }
        .faq-a { color: #999; font-size: 0.9rem; line-height: 1.6; }
        .hero-subtitle { font-size: 1.1rem; line-height: 1.7; color: #a0a0a0; max-width: 600px; margin: 0 auto; }
        .hero-subtitle strong { color: #fff; }
        .case-study { border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; padding: 1.5rem; margin-bottom: 1rem; background: rgba(255,255,255,0.02); transition: all 0.3s; }
        .case-study:hover { border-color: var(--neon-blue); background: rgba(0,243,255,0.05); }
        .case-study-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem; }
        .case-study-industry { font-size: 0.65rem; text-transform: uppercase; letter-spacing: 0.1em; color: var(--neon-blue); }
        .case-study-title { font-weight: 600; font-size: 1rem; margin-bottom: 0.5rem; }
        .case-study-result { font-size: 0.85rem; color: #888; }
        .case-study-metric { font-size: 1.5rem; font-weight: 700; color: var(--neon-blue); }
        .pricing-hint { background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; padding: 1rem; margin-top: 1rem; }
        .trust-badge { display: inline-flex; align-items: center; gap: 0.5rem; font-size: 0.7rem; color: #666; }
        .form-success { display: none; text-align: center; padding: 2rem; }
        .form-success.show { display: block; }
        .form-container.hidden { display: none; }
    </style>
</head>
<body>
    <canvas id="webgl-container"></canvas>

    <div class="hud-layer">
        <div class="hud-border tl"></div><div class="hud-border tr"></div><div class="hud-border bl"></div><div class="hud-border br"></div>
        <nav class="flex justify-between items-center w-full pointer-events-auto">
            <div class="text-2xl font-bold tracking-tighter font-mono">MASE<span class="text-cyan-400">_</span></div>
            <div class="flex items-center gap-4">
                <a href="#section-cases" class="text-sm text-gray-400 hover:text-white transition hidden md:block">Case Studies</a>
                <a href="#section-contact" class="cta-button py-2 px-6 text-xs bg-transparent text-white border-white/20 hover:bg-white hover:text-black">Get Started</a>
            </div>
        </nav>
        <div class="flex justify-between items-end w-full">
            <div class="status-pill"><span id="status-dot" class="status-dot"></span><span id="status-text">SYSTEM_READY</span></div>
            <div class="text-right font-mono text-xs text-gray-500">OPTIMIZATION: <span id="entropy-display">0%</span></div>
        </div>
    </div>

    <div class="progress-container"><div class="progress-bar" id="progress-bar"></div></div>

    <!-- HERO -->
    <section class="scroll-section" style="justify-content: center;" id="section-hero">
        <div class="content-card text-center" style="background: transparent; border: none; backdrop-filter: none; max-width: 900px;">
            <span class="marker-text">Enterprise AI Consulting</span>
            <h1 class="text-5xl md:text-7xl font-bold mb-8 glow-text tracking-tight leading-tight">
                Build the Foundation.<br>Own the Future.
            </h1>
            <p class="hero-subtitle">
                The companies that thrive in the next decade will be the ones that <strong>build AI into their core infrastructure today.</strong> We help you make that transition—strategically, systematically, and ahead of your competition.
            </p>
            <div class="mt-10">
                <a href="#section-contact" class="cta-button">Book Strategy Session</a>
            </div>
            <div class="mt-12 text-xs text-gray-500 font-mono animate-pulse">SCROLL TO EXPLORE ↓</div>
        </div>
    </section>

    <!-- SECTION 2: The Problem -->
    <section class="scroll-section" id="section-chaos">
        <div class="content-container-left">
            <div class="content-card">
                <span class="marker-text text-red-400">The Reality</span>
                <h2 class="text-3xl font-bold mb-4">The Gap Is Widening</h2>
                <p class="text-gray-300 mb-4 leading-relaxed">
                    Every industry is being reshaped by AI. The question isn't <em>if</em> it will affect your business—it's whether you'll be <strong class="text-white">leading the change or scrambling to catch up.</strong>
                </p>
                <p class="text-gray-400 text-sm leading-relaxed">
                    Most companies know they need to "do something with AI." But without a clear architecture and strategy, they end up with disconnected tools, pilot projects that never scale, and an organization that's no more capable than before.
                </p>
                <div class="flex items-center gap-4 text-xs font-mono text-red-400 border-t border-white/10 pt-4 mt-6">
                    <span>⚠ LEGACY DATA • NO UNIFIED STRATEGY • FALLING BEHIND</span>
                </div>
            </div>
        </div>
    </section>

    <!-- SECTION 3: The Solution -->
    <section class="scroll-section" id="section-scan">
        <div class="content-container-left">
            <div class="content-card">
                <span class="marker-text text-cyan-400">Our Approach</span>
                <h2 class="text-3xl font-bold mb-4">Infrastructure, Not Experiments</h2>
                <p class="text-gray-300 mb-4 leading-relaxed">
                    We don't build demos. We build <strong class="text-white">AI foundations</strong>—the underlying architecture that lets your company deploy, iterate, and scale AI capabilities as the technology evolves.
                </p>
                <p class="text-gray-400 text-sm leading-relaxed mb-6">
                    Our process starts with understanding your business deeply: where you are, where you're going, and what capabilities will make you untouchable in your market. Then we design and implement the systems to get you there.
                </p>
                <div class="flex flex-wrap">
                    <span class="service-tag">AI Strategy & Roadmap</span>
                    <span class="service-tag">Workflow Automation</span>
                    <span class="service-tag">Custom AI Agents</span>
                    <span class="service-tag">Data Infrastructure</span>
                    <span class="service-tag">Team Enablement</span>
                    <span class="service-tag">Ongoing Advisory</span>
                </div>
            </div>
        </div>
    </section>

    <!-- SECTION 4: Case Studies -->
    <section class="scroll-section" id="section-cases">
        <div class="content-container-right">
            <div class="content-card">
                <span class="marker-text text-green-400">Results</span>
                <h2 class="text-3xl font-bold mb-6">Transformation Stories</h2>
                
                <div class="case-study">
                    <div class="case-study-header">
                        <span class="case-study-industry">Manufacturing</span>
                        <span class="case-study-metric">73%</span>
                    </div>
                    <div class="case-study-title">Legacy Manufacturer → AI-Powered Operations</div>
                    <div class="case-study-result">Reduced manual data entry by 73% with intelligent document processing. Deployed predictive maintenance that cut unplanned downtime in half.</div>
                </div>

                <div class="case-study">
                    <div class="case-study-header">
                        <span class="case-study-industry">Financial Services</span>
                        <span class="case-study-metric">4.2x</span>
                    </div>
                    <div class="case-study-title">Regional Bank → Automated Risk Analysis</div>
                    <div class="case-study-result">Built AI pipeline that processes loan applications 4.2x faster while improving risk assessment accuracy. Compliance team now focuses on edge cases.</div>
                </div>

                <div class="case-study">
                    <div class="case-study-header">
                        <span class="case-study-industry">Professional Services</span>
                        <span class="case-study-metric">12hrs</span>
                    </div>
                    <div class="case-study-title">Law Firm → AI Document Intelligence</div>
                    <div class="case-study-result">Contract review that took 12+ hours now takes 45 minutes. AI flags risks, extracts key terms, and generates summaries automatically.</div>
                </div>

                <div class="pricing-hint">
                    <div class="text-xs text-gray-400 mb-1">TYPICAL ENGAGEMENT</div>
                    <div class="text-sm text-gray-300">Strategy sessions start at <strong class="text-white">$500</strong>. Full implementations range from <strong class="text-white">$5K–$50K+</strong> depending on scope.</div>
                </div>
            </div>
        </div>
    </section>

    <!-- SECTION 5: FAQ -->
    <section class="scroll-section" id="section-order">
        <div class="content-container-left">
            <div class="content-card">
                <span class="marker-text text-purple-400">Common Questions</span>
                <h2 class="text-3xl font-bold mb-4">What to Expect</h2>
                
                <div class="faq-item">
                    <div class="faq-q">Is my company ready for this?</div>
                    <div class="faq-a">If you're asking the question, you're ready. Our strategy session will clarify exactly where to start and how to phase the transformation.</div>
                </div>
                <div class="faq-item">
                    <div class="faq-q">What makes MASE different?</div>
                    <div class="faq-a">We build infrastructure, not slide decks. Our founder has shipped AI systems used in production—we know what actually works. Plus, we use our own AI agents internally, so we practice what we preach.</div>
                </div>
                <div class="faq-item">
                    <div class="faq-q">Do we need technical staff?</div>
                    <div class="faq-a">No. We handle the architecture and implementation. You bring the business vision, we build the AI infrastructure to support it.</div>
                </div>
                <div class="faq-item">
                    <div class="faq-q">How long does an implementation take?</div>
                    <div class="faq-a">Quick wins in 2-4 weeks. Full infrastructure buildouts in 2-4 months. We scope based on your priorities and move fast.</div>
                </div>
                <div class="faq-item" style="border-bottom: none;">
                    <div class="faq-q">Can AI agents contact you?</div>
                    <div class="faq-a">Yes. We're AI-native—autonomous agents can reach us at <a href="mailto:mase@mase-services.com" class="text-cyan-400 hover:underline">mase@mase-services.com</a> or reference our <a href="/llms.txt" class="text-cyan-400 hover:underline">llms.txt</a> file.</div>
                </div>
            </div>
        </div>
    </section>

    <!-- SECTION 6: Contact -->
    <section class="scroll-section" id="section-contact">
        <div class="content-container-left">
            <div class="content-card">
                <div class="form-container" id="form-container">
                    <span class="marker-text text-white">Get Started</span>
                    <h2 class="text-3xl font-bold mb-2">Book Your Strategy Session</h2>
                    <p class="text-gray-400 mb-6 text-sm leading-relaxed">
                        A focused conversation about where AI can have the most impact on your business—and a clear roadmap to get there. No pitch, no pressure. Just clarity.
                    </p>
                    <form id="contact-form" action="https://formspree.io/f/your-form-id" method="POST">
                        <div class="grid grid-cols-2 gap-4">
                            <input type="text" name="name" placeholder="Name" required aria-label="Your name" />
                            <input type="text" name="company" placeholder="Company" required aria-label="Company name" />
                        </div>
                        <input type="email" name="email" placeholder="Work Email" required aria-label="Work email address" />
                        <select name="stage" required aria-label="AI journey stage">
                            <option value="">Where are you on your AI journey?</option>
                            <option value="starting">Just getting started—need a strategy</option>
                            <option value="fragmented">Have tools but no unified approach</option>
                            <option value="scaling">Ready to scale what's working</option>
                            <option value="legacy">Need to modernize legacy systems</option>
                            <option value="exploring">Want to understand our options</option>
                        </select>
                        <textarea name="message" placeholder="Tell us briefly about your business and goals (optional)" rows="3" aria-label="Additional context"></textarea>
                        <button type="submit" class="w-full cta-button mt-4" id="submit-btn">Book Strategy Session</button>
                    </form>
                </div>
                
                <div class="form-success" id="form-success">
                    <div class="text-4xl mb-4">✓</div>
                    <h3 class="text-2xl font-bold mb-2">Request Received</h3>
                    <p class="text-gray-400">We'll be in touch within 24 hours to schedule your strategy session.</p>
                </div>

                <div class="mt-8 pt-6 border-t border-white/10 flex justify-between items-center text-xs text-gray-500">
                    <div class="trust-badge">
                        <span>MASE Services LLC</span>
                        <span>•</span>
                        <span>California</span>
                    </div>
                    <div class="trust-badge">
                        <span class="text-cyan-400">●</span>
                        <span>AI-Native Agency</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div style="height: 10vh;"></div>

    <!-- Footer -->
    <footer class="relative z-20 border-t border-white/10 py-8 px-8">
        <div class="max-w-6xl mx-auto flex flex-col md:flex-row justify-between items-center gap-4">
            <div class="text-sm text-gray-500">
                © 2026 Mase Services LLC. All rights reserved.
            </div>
            <div class="flex gap-6 text-sm text-gray-500">
                <a href="mailto:mase@mase-services.com" class="hover:text-white transition">mase@mase-services.com</a>
                <a href="/llms.txt" class="hover:text-cyan-400 transition">llms.txt</a>
            </div>
        </div>
    </footer>

    <script>
        // Form handling with fallback
        const form = document.getElementById('contact-form');
        const formContainer = document.getElementById('form-container');
        const formSuccess = document.getElementById('form-success');
        const submitBtn = document.getElementById('submit-btn');

        form.addEventListener('submit', async function(e) {
            e.preventDefault();
            submitBtn.disabled = true;
            submitBtn.textContent = 'Sending...';

            const formData = new FormData(form);
            
            try {
                // Try Formspree first
                const response = await fetch(form.action, {
                    method: 'POST',
                    body: formData,
                    headers: { 'Accept': 'application/json' }
                });

                if (response.ok) {
                    formContainer.classList.add('hidden');
                    formSuccess.classList.add('show');
                } else {
                    // Fallback to mailto
                    const subject = encodeURIComponent(`Strategy Session Request from ${formData.get('name')}`);
                    const body = encodeURIComponent(`Name: ${formData.get('name')}\nCompany: ${formData.get('company')}\nEmail: ${formData.get('email')}\nStage: ${formData.get('stage')}\n\nMessage:\n${formData.get('message') || 'N/A'}`);
                    window.location.href = `mailto:mase@mase-services.com?subject=${subject}&body=${body}`;
                }
            } catch (error) {
                // Fallback to mailto on error
                const subject = encodeURIComponent(`Strategy Session Request from ${formData.get('name')}`);
                const body = encodeURIComponent(`Name: ${formData.get('name')}\nCompany: ${formData.get('company')}\nEmail: ${formData.get('email')}\nStage: ${formData.get('stage')}\n\nMessage:\n${formData.get('message') || 'N/A'}`);
                window.location.href = `mailto:mase@mase-services.com?subject=${subject}&body=${body}`;
            }

            submitBtn.disabled = false;
            submitBtn.textContent = 'Book Strategy Session';
        });

        // Three.js and GSAP animation code
        const config = {
            particleCount: 400,
            cubeSize: 0.7,
            spread: 10,
            colors: {
                building: new THREE.Color('#5a6270'),
                buildingLight: new THREE.Color('#6a7280'),
                chaos: new THREE.Color('#4a4a4a'),
                alert: new THREE.Color('#ff2a2a'),
                safeDim: new THREE.Color('#0088aa'),
                safeBright: new THREE.Color('#00ffff')
            }
        };

        const canvas = document.querySelector('#webgl-container');
        const renderer = new THREE.WebGLRenderer({ canvas, antialias: true, alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));

        const scene = new THREE.Scene();
        scene.fog = new THREE.FogExp2(0x030305, 0.018);
        
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 100);
        camera.position.set(0, 2, 22);

        const ambientLight = new THREE.AmbientLight(0x404050, 2.5);
        scene.add(ambientLight);
        const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
        directionalLight.position.set(10, 20, 15);
        scene.add(directionalLight);
        const fillLight = new THREE.DirectionalLight(0x334455, 0.4);
        fillLight.position.set(-10, 5, -10);
        scene.add(fillLight);

        const geometry = new THREE.BoxGeometry(config.cubeSize, config.cubeSize, config.cubeSize);
        const material = new THREE.MeshStandardMaterial({ color: 0x5a6270, roughness: 0.7, metalness: 0.1 });
        const cubes = new THREE.InstancedMesh(geometry, material, config.particleCount);
        scene.add(cubes);

        const dummy = new THREE.Object3D();
        const buildingPositions = [];
        const randomPositions = [];
        const gridPositions = [];
        const colors = new Float32Array(config.particleCount * 3);
        const isRed = [];

        const buildings = [
            { x: 0, z: 0, w: 4, d: 3, h: 18 },
            { x: 5, z: 0, w: 3, d: 2.5, h: 13 },
            { x: -5, z: 0, w: 3, d: 2.5, h: 14 },
            { x: 9, z: 0, w: 2.5, d: 2, h: 9 },
            { x: -9, z: 0, w: 2.5, d: 2, h: 10 },
            { x: 3, z: 3, w: 2.5, d: 2, h: 8 },
            { x: -3, z: 3, w: 2.5, d: 2, h: 7 },
            { x: 7, z: 2.5, w: 2, d: 2, h: 6 },
            { x: -7, z: 2.5, w: 2, d: 2, h: 5 },
            { x: 12, z: 0, w: 2, d: 2, h: 5 },
            { x: -12, z: 0, w: 2, d: 2, h: 6 },
            { x: 0, z: 4, w: 10, d: 2, h: 3 },
        ];

        const spacing = config.cubeSize * 1.02;
        buildings.forEach(b => {
            for (let y = 0; y < b.h; y += spacing) {
                for (let x = -b.w/2; x < b.w/2; x += spacing) {
                    for (let z = -b.d/2; z < b.d/2; z += spacing) {
                        if (buildingPositions.length/3 < config.particleCount) {
                            buildingPositions.push(b.x + x, y - 6, b.z + z);
                        }
                    }
                }
            }
        });

        while (buildingPositions.length < config.particleCount * 3) {
            const bIdx = Math.floor(Math.random() * buildings.length);
            const b = buildings[bIdx];
            buildingPositions.push(b.x + (Math.random()-0.5)*b.w, Math.random()*b.h - 6, b.z + (Math.random()-0.5)*b.d);
        }

        for (let i = 0; i < config.particleCount; i++) {
            randomPositions.push(
                (Math.random()-0.5) * config.spread * 2.5,
                (Math.random()-0.5) * config.spread * 2.5,
                (Math.random()-0.5) * config.spread * 2.5
            );

            const phi = Math.acos(-1 + (2*i)/config.particleCount);
            const theta = Math.sqrt(config.particleCount * Math.PI) * phi;
            const radius = 5;
            gridPositions.push(
                radius * Math.cos(theta) * Math.sin(phi),
                radius * Math.sin(theta) * Math.sin(phi),
                radius * Math.cos(phi)
            );

            isRed.push(Math.random() < 0.2);
            
            colors[i*3] = config.colors.building.r;
            colors[i*3+1] = config.colors.building.g;
            colors[i*3+2] = config.colors.building.b;

            dummy.position.set(buildingPositions[i*3], buildingPositions[i*3+1], buildingPositions[i*3+2]);
            dummy.rotation.set(0,0,0);
            dummy.updateMatrix();
            cubes.setMatrixAt(i, dummy.matrix);
        }
        cubes.instanceColor = new THREE.InstancedBufferAttribute(colors, 3);

        const scanGeo = new THREE.SphereGeometry(1, 32, 32);
        const scanMat = new THREE.MeshBasicMaterial({ color: 0x00f3ff, wireframe: true, transparent: true, opacity: 0 });
        const scanSphere = new THREE.Mesh(scanGeo, scanMat);
        scene.add(scanSphere);
        
        const glowMat = new THREE.MeshBasicMaterial({ color: 0xffffff, transparent: true, opacity: 0, blending: THREE.AdditiveBlending });
        const scanGlow = new THREE.Mesh(new THREE.SphereGeometry(0.8, 32, 32), glowMat);
        scene.add(scanGlow);

        const state = {
            buildingChaosMix: 0,
            chaosOrderMix: 0,
            scanRadius: 0,
            rotationSpeed: 0.0003,
            cubeOffsetX: 0,
            brightness: 0
        };

        gsap.registerPlugin(ScrollTrigger);

        const tl = gsap.timeline({
            scrollTrigger: { trigger: "body", start: "top top", end: "bottom bottom", scrub: 1.5 }
        });

        tl.to(state, { buildingChaosMix: 1, duration: 2 });
        tl.to(camera.position, { y: 0, z: 14, duration: 2 }, "<");
        
        tl.to([scanSphere.material, scanGlow.material], { opacity: 0.5, duration: 0.2 });
        tl.to(state, { scanRadius: 25, duration: 4 }, "<");
        tl.to(scanSphere.scale, { x: 25, y: 25, z: 25, duration: 4 }, "<");
        tl.to(scanGlow.scale, { x: 24, y: 24, z: 24, duration: 4 }, "<");
        tl.to([scanSphere.material, scanGlow.material], { opacity: 0, duration: 1 }, "-=3");

        tl.to(state, { chaosOrderMix: 1, cubeOffsetX: 5, brightness: 0.5, duration: 3 });
        tl.to(camera.position, { z: 14, duration: 3 }, "<");

        tl.to(state, { brightness: 1, duration: 2 });
        tl.to(camera.position, { z: 12, duration: 2 }, "<");

        document.querySelectorAll('.content-card').forEach(card => {
            gsap.fromTo(card, { opacity: 0, y: 30 }, { 
                opacity: 1, y: 0, duration: 1,
                scrollTrigger: { trigger: card, start: "top 80%", end: "top 50%", toggleActions: "play none none reverse" }
            });
        });

        gsap.to("#progress-bar", { height: "100%", ease: "none", scrollTrigger: { trigger: "body", scrub: 0 } });

        ScrollTrigger.create({
            trigger: "#section-chaos", start: "top center",
            onEnter: () => { document.getElementById('status-dot').className="status-dot alert"; document.getElementById('status-text').innerText="ANALYZING"; document.getElementById('status-text').style.color="#ff2a2a"; },
            onLeaveBack: () => { document.getElementById('status-dot').className="status-dot"; document.getElementById('status-text').innerText="SYSTEM_READY"; document.getElementById('status-text').style.color="white"; }
        });
        ScrollTrigger.create({
            trigger: "#section-cases", start: "top center",
            onEnter: () => { document.getElementById('status-dot').className="status-dot active"; document.getElementById('status-text').innerText="CASE_STUDIES"; document.getElementById('status-text').style.color="#00f3ff"; },
            onLeaveBack: () => { document.getElementById('status-dot').className="status-dot alert"; document.getElementById('status-text').innerText="PROCESSING"; }
        });
        ScrollTrigger.create({
            trigger: "#section-order", start: "top center",
            onEnter: () => { document.getElementById('status-text').innerText="OPTIMIZED"; },
            onLeaveBack: () => { document.getElementById('status-text').innerText="CASE_STUDIES"; }
        });
        ScrollTrigger.create({
            trigger: "#section-contact", start: "top center",
            onEnter: () => { document.getElementById('status-text').innerText="READY"; }
        });

        const tempColor = new THREE.Color();
        const tempPos = new THREE.Vector3();
        const currentPos = new THREE.Vector3();
        const targetPos = new THREE.Vector3();
        const spherePos = new THREE.Vector3();
        const brightBlue = new THREE.Color();

        function animate() {
            requestAnimationFrame(animate);
            
            cubes.rotation.y += state.rotationSpeed;
            cubes.position.x = state.cubeOffsetX;
            
            scanSphere.rotation.y -= 0.01;
            scanSphere.rotation.z += 0.01;

            const time = Date.now() * 0.0005;

            brightBlue.lerpColors(config.colors.safeDim, config.colors.safeBright, state.brightness);

            for (let i = 0; i < config.particleCount; i++) {
                const ix3 = i * 3;
                
                currentPos.set(buildingPositions[ix3], buildingPositions[ix3+1], buildingPositions[ix3+2]);
                targetPos.set(randomPositions[ix3], randomPositions[ix3+1], randomPositions[ix3+2]);
                tempPos.lerpVectors(currentPos, targetPos, state.buildingChaosMix);
                
                spherePos.set(gridPositions[ix3], gridPositions[ix3+1], gridPositions[ix3+2]);
                tempPos.lerp(spherePos, state.chaosOrderMix);

                dummy.position.copy(tempPos);

                const rotFactor = (1 - state.chaosOrderMix);
                dummy.rotation.set(
                    Math.sin(i * 0.5 + time) * rotFactor * 0.5,
                    Math.cos(i * 0.3 + time) * rotFactor * 0.5,
                    0
                );

                const dist = tempPos.length();
                let scale = 1;

                if (state.buildingChaosMix < 0.3) {
                    tempColor.copy(i % 3 === 0 ? config.colors.buildingLight : config.colors.building);
                } else if (state.buildingChaosMix < 0.6) {
                    tempColor.lerpColors(config.colors.building, isRed[i] ? config.colors.alert : config.colors.chaos, (state.buildingChaosMix - 0.3) / 0.3);
                } else {
                    tempColor.copy(isRed[i] ? config.colors.alert : config.colors.chaos);
                }

                if (state.scanRadius > 0.1) {
                    if (dist < state.scanRadius) {
                        if (isRed[i]) {
                            scale = 0;
                        } else if (dist > state.scanRadius - 2) {
                            tempColor.setHex(0xffffff);
                        } else {
                            tempColor.copy(brightBlue);
                        }
                    }
                }

                if (state.chaosOrderMix > 0.1 && !isRed[i]) {
                    tempColor.lerp(brightBlue, state.chaosOrderMix);
                }

                if (scale > 0) {
                    scale = 1 + Math.sin(time * 2 + i) * 0.08;
                }

                dummy.scale.set(scale, scale, scale);
                dummy.updateMatrix();
                cubes.setMatrixAt(i, dummy.matrix);
                cubes.setColorAt(i, tempColor);
            }

            cubes.instanceMatrix.needsUpdate = true;
            cubes.instanceColor.needsUpdate = true;

            document.getElementById('entropy-display').innerText = Math.round(state.chaosOrderMix * 100) + "%";

            renderer.render(scene, camera);
        }

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        animate();
    </script>
</body>
</html>
